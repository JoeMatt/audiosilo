(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{304:function(t,e,l){"use strict";l.r(e);var n=l(7),r=(l(44),l(305),l(306),l(309),l(48),l(188),l(137)),o=l(310),c={name:"Player",props:["details","server"],data:function(){return{percent:30,remaining:"13h27m remaining",editPlaybackSpeed:!1,player:null,soundid:null,playing:!1,seek:0,loading:!1}},computed:{image:function(){return this.$store.state.app.book.cover},groupDetails:function(){return this.$store.state.app.groupDetails},playbackSpeed:function(){return Number.parseFloat(this.groupDetails.playback_speed).toFixed(2)},transcode:function(){return this.$store.state.app.transcode},hash:function(){return Object(r.sha256)(this.$route.fullPath)}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var l,n,r,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="audioserv-".concat(t.hash),e.next=3,caches.open(l);case 3:return n=e.sent,e.next=6,n.match("BillionaireBoy.m4b");case 6:r=e.sent,c=void 0!==r?r.url:t.server+"audio/"+t.details.files[0].path+"?trans="+t.transcode,console.log(r),t.player=new o.Howl({src:c,html5:!0}),f=t,t.player.on("play",(function(){console.log("on play"),f.loading=!1})).on("load",(function(){console.log("on load")})).on("loaderror",(function(t,e){console.log("load error"),console.log(t),console.log(e)})),console.log("m4a"+o.Howler.codecs("m4a")),console.log("m4b"+o.Howler.codecs("m4b")),console.log("aac"+o.Howler.codecs("aac"));case 15:case"end":return e.stop()}}),e)})))()},methods:{closePlayer:function(){this.$store.commit("app/player",!1)},togglePlay:function(){this.playing?this.pause():this.play()},play:function(){this.loading=!0,console.log("play file"),this.player.seek(this.seek,this.soundid),null!==this.soundid?this.player.play(this.soundid):this.soundid=this.player.play(),this.playing=!0},pause:function(){console.log("pause file"),this.player.pause(this.soundid),this.seek=this.player.seek(null,this.soundid),this.playing=!1},updatePlaybackSpeed:function(t){this.$store.commit("app/playbackSpeed",t.target.value)},increasePlaybackSpeed:function(){var t=parseFloat(this.playbackSpeed)+parseFloat("0.05");this.$store.commit("app/playbackSpeed",t.toFixed(2)),this.player.rate(t.toFixed(2))},decreasePlaybackSpeed:function(){var t=parseFloat(this.playbackSpeed)-parseFloat("0.05");this.$store.commit("app/playbackSpeed",t.toFixed(2)),this.player.rate(t.toFixed(2))}}},f=l(52),component=Object(f.a)(c,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"flex flex-col justify-between relative h-screen overflow-auto"},[l("div",{staticClass:"absolute top-0 right-0 bg-gray-200 w-8 h-8 rounded-bl flex cursor-pointer justify-center items-center",on:{click:t.closePlayer}},[l("i",{staticClass:"fa-thin fa-chevron-down"})]),t._v(" "),l("div",[l("div",{staticClass:"text p-8 pb-5 flex justify-center flex-shrink"},[l("img",{staticClass:"block shadow rounded-md",attrs:{src:t.image}})]),t._v(" "),l("div",{staticClass:"w-full px-8 flex flex-col text-center items-center"},[l("div",{staticClass:"text-xl font-semibold flex mb-2"},[t._v("Chapter 1")]),t._v(" "),l("div",{staticClass:"text-sm text-gray-400 mb-2"},[t._v(t._s(t.details.files[0].name)+" - Artist name")]),t._v(" "),l("div",{staticClass:"flex w-full pt-1 items-center"},[l("div",{staticClass:"relative flex-grow mr-2"},[l("div",{staticClass:"overflow-hidden h-2 text-xs flex rounded bg-purple-200"},[l("div",{staticClass:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-purple-400",style:{width:t.percent+"%"}})])]),t._v(" "),l("div",{staticClass:"text-sm"},[t._v(t._s(t.percent)+"%")])]),t._v(" "),l("div",{staticClass:"px-8 text-xs"},[t._v(t._s(t.remaining))])])]),t._v(" "),l("div",{staticClass:"flex items-center w-full justify-evenly my-5"},[t._m(0),t._v(" "),l("div",{staticClass:"cursor-pointer relative"},[l("span",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticClass:"fa-layers fa-fw fa-6x",on:{click:t.togglePlay}},[l("i",{staticClass:"fa-solid fa-circle text-gray-600"}),t._v(" "),l("i",{staticClass:"fa-inverse fa-solid fa-play",attrs:{"data-fa-transform":"shrink-10"}})]),t._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],staticClass:"fa-layers fa-fw fa-6x",on:{click:t.togglePlay}},[l("i",{staticClass:"fa-solid fa-circle text-gray-600"}),t._v(" "),l("i",{staticClass:"fa-inverse fa-solid fa-pause",attrs:{"data-fa-transform":"shrink-10"}})]),t._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"fa-layers fa-fw fa-6x absolute inset-0 opacity-70",on:{click:t.togglePlay}},[l("i",{staticClass:"fa-solid fa-circle text-gray-600"}),t._v(" "),l("i",{staticClass:"fa-inverse fa-light fa-spinner-third fa-spin",attrs:{"data-fa-transform":"shrink-2"}})])]),t._v(" "),t._m(1)]),t._v(" "),l("div",{staticClass:"p-5 w-full"},[l("div",{staticClass:"bg-gray-200 rounded p-3 px-6 w-full relative flex justify-between"},[l("button",{staticClass:"cursor-pointer",on:{click:function(e){t.editPlaybackSpeed=!0}}},[t._v(t._s(t.playbackSpeed)+"x")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t.editPlaybackSpeed?l("div",{staticClass:"absolute inset-0 flex bg-gray-200 rounded justify-between p-3 px-6"},[l("span",[t._v(t._s(t.playbackSpeed)+"x")]),t._v(" "),l("div",{staticClass:"flex items-center"},[l("div",{staticClass:"mx-3 cursor-pointer",on:{click:t.decreasePlaybackSpeed}},[l("i",{staticClass:"fa-solid fa-circle-minus text-gray-600 fa-lg"})]),t._v(" "),l("div",[l("input",{staticClass:"w-12 p-2 text-center",domProps:{value:t.playbackSpeed},on:{input:t.updatePlaybackSpeed}})]),t._v(" "),l("div",{staticClass:"mx-3 cursor-pointer",on:{click:t.increasePlaybackSpeed}},[l("i",{staticClass:"fa-solid fa-circle-plus text-gray-600 fa-lg"})])]),t._v(" "),l("div",{staticClass:"cursor-pointer",on:{click:function(e){t.editPlaybackSpeed=!1}}},[t._v("Close")])]):t._e()])])])}),[function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{},[l("span",{staticClass:"fa-layers fa-fw fa-3x relative"},[l("i",{staticClass:"fa-thin fa-circle-notch fa-rotate-by",staticStyle:{"--fa-rotate-angle":"-23deg"}}),t._v(" "),l("i",{staticClass:"fa-solid fa-chevron-left",staticStyle:{"font-size":"12px"},attrs:{"data-fa-transform":"up-30"}}),t._v(" "),l("span",{staticClass:"text-sm absolute inset-0 flex justify-center items-center"},[t._v("30")])])])},function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{},[l("span",{staticClass:"fa-layers fa-fw fa-3x relative"},[l("i",{staticClass:"fa-thin fa-circle-notch fa-rotate-by",staticStyle:{"--fa-rotate-angle":"23deg"}}),t._v(" "),l("i",{staticClass:"fa-solid fa-chevron-right",staticStyle:{"font-size":"12px"},attrs:{"data-fa-transform":"up-30"}}),t._v(" "),l("span",{staticClass:"text-sm absolute inset-0 flex justify-center items-center"},[t._v("45")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"cursor-pointer"},[e("i",{staticClass:"fa-thin fa-alarm-snooze"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"cursor-pointer"},[e("i",{staticClass:"fa-thin fa-airplay"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"cursor-pointer"},[e("i",{staticClass:"fa-thin fa-sliders-up"})])}],!1,null,null,null);e.default=component.exports}}]);