(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{127:function(e,t,n){"use strict";n.r(t),t.default=function(){return{collections:[],currentCollection:0,cacheKey:"audioserve-",loginStatus:!1,loginsecret:null,server:null,folder:null,group:null,groupDetails:{playback_speed:1,seekForwards:45,seekBackwards:30,active_books:[],finished_books:[]},book:{hash:null,name:null,author:null,description:null,cover:null,seek:0},folderDescription:"",secret:null,player:!1,transcode:"0",rightbar:!1}}},128:function(e,t,n){"use strict";function r(e){var t=e.server;return e.currentCollection>0&&(t=e.server+e.currentCollection+"/"),t}n.r(t),n.d(t,"getServerUrl",(function(){return r}))},129:function(e,t,n){"use strict";n.r(t),n.d(t,"loginsecret",(function(){return r})),n.d(t,"rightbar",(function(){return o})),n.d(t,"player",(function(){return c})),n.d(t,"groupDetails",(function(){return l})),n.d(t,"playbackSpeed",(function(){return f})),n.d(t,"book",(function(){return d})),n.d(t,"folder",(function(){return m})),n.d(t,"description",(function(){return h})),n.d(t,"cover",(function(){return w})),n.d(t,"folderDescription",(function(){return y})),n.d(t,"loginStatus",(function(){return v})),n.d(t,"server",(function(){return x})),n.d(t,"group",(function(){return k})),n.d(t,"collections",(function(){return O})),n.d(t,"currentCollection",(function(){return j}));n(24),n(32);function r(e,data){e.loginsecret=data}function o(e,data){e.rightbar=data}function c(e,data){e.player=data}function l(e,data){e.groupDetails=data}function f(e,data){e.groupDetails.playback_speed=data}function d(e,data){e.book=data}function m(e,data){e.folder=data}function h(e,data){e.book.description=data}function w(e,data){e.book.cover=data}function y(e,data){e.folderDescription=data}function v(e,data){e.loginStatus=data}function x(e,data){e.server=data}function k(e,data){e.group=data}function O(e,data){e.collections=data}function j(e,data){e.currentCollection=data}},130:function(e,t,n){"use strict";n.r(t),n.d(t,"setDetails",(function(){return R})),n.d(t,"login",(function(){return z})),n.d(t,"fetchCollections",(function(){return S})),n.d(t,"getFolderDescription",(function(){return I})),n.d(t,"getBookDetails",(function(){return A})),n.d(t,"updateBookDetails",(function(){return P})),n.d(t,"setBookDetails",(function(){return _})),n.d(t,"getDescription",(function(){return E})),n.d(t,"fileIsCached",(function(){return K})),n.d(t,"getCachedFile",(function(){return J})),n.d(t,"cacheFile",(function(){return $})),n.d(t,"tempCache",(function(){return V})),n.d(t,"initialiseApp",(function(){return N}));n(50),n(49),n(74),n(40),n(75),n(41),n(36),n(43),n(44);var r=n(30),o=n(4),c=(n(39),n(229),n(14),n(231),n(237),n(239),n(240),n(241),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(265),n(266),n(267),n(24),n(32),n(45),n(101),n(166),n(21),n(25),n(136),n(179)),l=n.n(c),f=n(137),d=n(134),m=n.n(d),h=n(61),w=n.n(h),y=n(17),v=n.n(y);function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function R(e,data){console.log("set details"),v.a.setItem("server",data.server),v.a.setItem("group",data.group),v.a.setItem("loginStatus",data.loginStatus),v.a.setItem("collections",data.collections),v.a.setItem("currentCollection",data.currentCollection)}function z(e,data){var t=!1,n=null;if(data.secret){var r=new TextEncoder("utf-8").encode(data.secret),c=new Uint8Array(32);window.crypto.getRandomValues(c);var l=new Uint8Array(r.length+c.length);l.set(r),l.set(c,r.length),(window.crypto.subtle?window.crypto.subtle.digest("SHA-256",l):Promise.resolve(f.sha256.arrayBuffer(l))).then((function(s){var r=m.a.fromByteArray(c)+"|"+m.a.fromByteArray(new Uint8Array(s)),l="secret="+encodeURIComponent(r);fetch(data.server+"authenticate",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l}).then(function(){var r=Object(o.a)(regeneratorRuntime.mark((function r(o){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.text();case 2:return n=r.sent,w.a.set("audioserve_token",n),t=!0,e.commit("loginStatus",t),r.next=8,S(e);case 8:c=r.sent,R(0,j(j({},data),{},{loginStatus:t,collections:c.names,currentCollection:0}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}))}else t=!0,n="noauth";e.commit("loginsecret",n),e.commit("loginStatus",t),R(0,j(j({},data),{},{loginStatus:t}))}function S(e){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.state.server+"collections",{headers:{Authorization:"Bearer "+w.a.get("audioserve_token")}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(regeneratorRuntime.mark((function e(t,path){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,path);case 2:n=e.sent,t.commit("folderDescription",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return B.apply(this,arguments)}function B(){return(B=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getItem(n);case 2:if(r=e.sent){e.next=14;break}if(o=null,!t.state.folder.description||!t.state.folder.description.path){e.next=9;break}return e.next=8,E(t,t.state.folder.description.path);case 8:o=e.sent;case 9:return c=null,t.state.folder.cover&&(c=t.state.server+"cover/"+t.state.folder.cover.path),r={hash:n,name:"Unknown",author:"Unknown",description:o,cover:c,seek:0},e.next=14,v.a.setItem(n,r);case 14:t.commit("book",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return U.apply(this,arguments)}function U(){return(U=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.book,o=n.book,c=j(j({},r),o),e.next=5,v.a.setItem(n.hash,c);case 5:t.commit("book",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.setItem(n.hash,n);case 2:t.commit("book",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(regeneratorRuntime.mark((function e(t,path){var n,r,o,data,output,c,f,d,m,line;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.server+"desc/"+path,e.next=3,fetch(n,{headers:{Authorization:"Bearer "+w.a.get("audioserve_token")}});case 3:return r=e.sent,console.log(r),console.log(r.headers.get("Content-Type")),o=r.headers.get("Content-Type"),e.next=9,r.text();case 9:if(data=e.sent,console.log(data),output="",c="","text/html"===o)output=data;else if("text/x-markdown"===o||"text/markdown"===o)output=l()(data);else if("text/plain"===o){f=data.split(/\r?\n/),d=x(f);try{for(d.s();!(m=d.n()).done;)line=m.value,c+="<p>"+line+"</p>"}catch(e){d.e(e)}finally{d.f()}output=c}else output=r.data;return e.abrupt("return",output);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(regeneratorRuntime.mark((function e(t,details){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.cacheKey+details.hash,e.next=3,caches.has(n);case 3:if(!e.sent){e.next=12;break}return e.next=7,caches.open(n);case 7:return r=e.sent,e.next=10,r.match(details.file);case 10:return o=e.sent,e.abrupt("return",void 0!==o);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(regeneratorRuntime.mark((function e(t,details){var n,r,o,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.cacheKey+details.hash,e.next=3,caches.open(n);case 3:return r=e.sent,e.next=6,r.match(details.file);case 6:if(o=e.sent,c=null,void 0===o){e.next=13;break}return e.next=11,o.blob();case 11:l=e.sent,c=URL.createObjectURL(l);case 13:return f=/(?:\.([^.]+))?$/,e.abrupt("return",{src:c,format:f.exec(o.url)[1]});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return H.apply(this,arguments)}function H(){return(H=Object(o.a)(regeneratorRuntime.mark((function e(t,details){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.cacheKey+details.hash,e.next=3,caches.open(n);case 3:return r=e.sent,e.next=6,fetch(details.file,{headers:{Authorization:"Bearer "+w.a.get("audioserve_token")}});case 6:return o=e.sent,console.log(o),e.next=10,r.put(details.file,o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return G.apply(this,arguments)}function G(){return(G=Object(o.a)(regeneratorRuntime.mark((function e(t,details){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t,details);case 2:if(!e.sent){e.next=5;break}return e.abrupt("return",J(t,details));case 5:return e.next=7,$(t,details);case 7:return e.abrupt("return",J(t,details));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getItem("server");case 2:return n=e.sent,e.next=5,v.a.getItem("group");case 5:return r=e.sent,e.next=8,v.a.getItem("loginStatus");case 8:return o=e.sent,e.next=11,v.a.getItem("collections");case 11:return c=e.sent,e.next=14,v.a.getItem("currentCollection");case 14:l=e.sent,n&&t.commit("server",n),r&&t.commit("group",r),o&&t.commit("loginStatus",o),c&&t.commit("collections",c),l&&t.commit("currentCollection",l);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},185:function(e,t,n){n(186),e.exports=n(187)},226:function(e,t,n){var content=n(227);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("581dbee3",content,!0,{sourceMap:!1})},227:function(e,t,n){var r=n(78)((function(i){return i[1]}));r.push([e.i,'/*purgecss start ignore*/\n\n*,body{\n  font-family:"Roboto",sans-serif;\n  font-weight:300\n}\n\n.content-area{\n  height:calc(100vh - 6rem)\n}\n\n.mobilesearch{\n  position:absolute;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  padding:15px\n}\n\n.mobilesearch input{\n  padding:.75rem 1.25rem\n}\n\n.label-floating label{\n  color:#9ca3af;\n  font-weight:300\n}\n\n.label-floating input:not(:-moz-placeholder-shown),.label-floating select:not(:-moz-placeholder-shown){\n  padding-top:1.6rem;\n  padding-bottom:.25rem\n}\n\n.label-floating input:not(:-ms-input-placeholder),.label-floating select:not(:-ms-input-placeholder){\n  padding-top:1.6rem;\n  padding-bottom:.25rem\n}\n\n.label-floating input:not(:-moz-placeholder-shown), .label-floating select:not(:-moz-placeholder-shown){\n  padding-top:1.6rem;\n  padding-bottom:.25rem\n}\n\n.label-floating input:not(:-ms-input-placeholder), .label-floating select:not(:-ms-input-placeholder){\n  padding-top:1.6rem;\n  padding-bottom:.25rem\n}\n\n.label-floating input:not(:placeholder-shown),.label-floating select:not(:placeholder-shown){\n  padding-top:1.6rem;\n  padding-bottom:.25rem\n}\n\n.label-floating input:not(:-moz-placeholder-shown)~label, .label-floating select:not(:-moz-placeholder-shown)~label{\n  padding-top:0.5rem;\n  padding-bottom:0.5rem;\n  font-weight:400;\n  --tw-text-opacity:1;\n  color:rgba(219, 39, 119, var(--tw-text-opacity))\n}\n\n.label-floating input:not(:-moz-placeholder-shown)~label,.label-floating select:not(:-moz-placeholder-shown)~label{\n  font-size:.8rem;\n  -moz-transition:all .2s ease-in-out;\n  transition:all .2s ease-in-out\n}\n\n.label-floating input:not(:-ms-input-placeholder)~label, .label-floating select:not(:-ms-input-placeholder)~label{\n  padding-top:0.5rem;\n  padding-bottom:0.5rem;\n  font-weight:400;\n  --tw-text-opacity:1;\n  color:rgba(219, 39, 119, var(--tw-text-opacity))\n}\n\n.label-floating input:not(:-ms-input-placeholder)~label,.label-floating select:not(:-ms-input-placeholder)~label{\n  font-size:.8rem;\n  -ms-transition:all .2s ease-in-out;\n  transition:all .2s ease-in-out\n}\n\n.label-floating input:not(:-moz-placeholder-shown)~label, .label-floating select:not(:-moz-placeholder-shown)~label{\n  padding-top:0.5rem;\n  padding-bottom:0.5rem;\n  font-weight:400;\n  --tw-text-opacity:1;\n  color:rgba(219, 39, 119, var(--tw-text-opacity))\n}\n\n.label-floating input:not(:-ms-input-placeholder)~label, .label-floating select:not(:-ms-input-placeholder)~label{\n  padding-top:0.5rem;\n  padding-bottom:0.5rem;\n  font-weight:400;\n  --tw-text-opacity:1;\n  color:rgba(219, 39, 119, var(--tw-text-opacity))\n}\n\n.label-floating input:not(:placeholder-shown)~label, .label-floating select:not(:placeholder-shown)~label{\n  padding-top:0.5rem;\n  padding-bottom:0.5rem;\n  font-weight:400;\n  --tw-text-opacity:1;\n  color:rgba(219, 39, 119, var(--tw-text-opacity))\n}\n\n.label-floating input:not(:-moz-placeholder-shown)~label, .label-floating select:not(:-moz-placeholder-shown)~label{\n  font-size:.8rem;\n  -moz-transition:all .2s ease-in-out;\n  transition:all .2s ease-in-out\n}\n\n.label-floating input:not(:-ms-input-placeholder)~label, .label-floating select:not(:-ms-input-placeholder)~label{\n  font-size:.8rem;\n  -ms-transition:all .2s ease-in-out;\n  transition:all .2s ease-in-out\n}\n\n.label-floating input:not(:placeholder-shown)~label,.label-floating select:not(:placeholder-shown)~label{\n  font-size:.8rem;\n  transition:all .2s ease-in-out\n}\n\n.breadcrumbs{\n  margin-bottom:1rem\n}\n\n.breadcrumbs span{\n  margin-right:0.5rem;\n  cursor:pointer;\n  font-size:0.875rem;\n  line-height:1.25rem;\n  --tw-text-opacity:1;\n  color:rgba(156, 163, 175, var(--tw-text-opacity));\n  text-decoration:underline\n}\n\n.breadcrumbs span.active{\n  font-weight:400;\n  font-weight:400;\n  --tw-text-opacity:1;\n  color:rgba(209, 213, 219, var(--tw-text-opacity));\n  --tw-text-opacity:1;\n  color:rgba(219, 39, 119, var(--tw-text-opacity));\n  text-decoration:none\n}\n\n.sidebar{\n  background-color:#f9f9f9\n}\n\n/*purgecss end ignore*/',""]),r.locals={},e.exports=r},228:function(e,t,n){"use strict";n.r(t);var r=n(127),o=n(128),c=n(129),l=n(130);t.default={namespaced:!0,state:r.default,getters:o,mutations:c,actions:l}}},[[185,8,2,9]]]);