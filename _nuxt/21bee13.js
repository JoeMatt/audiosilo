(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{312:function(t,e,r){"use strict";r.r(e);var n=r(0),o=(r(40),r(22),{layout:"page",name:"App",transition:{name:"page"},components:{},data:function(){return{foldername:"",corsproxy:"",secret:""}},computed:{currentFolder:function(){return this.$route.query.folder||""},currentFile:function(){return this.$store.state.player.currentFile},loginStatus:function(){return this.$store.state.app.loginStatus},server:function(){return this.$store.state.app.server},current:function(){return this.$store.state.player.current},folder:function(){return this.$store.state.app.folder},group:function(){return this.$store.state.app.group},rightbar:function(){return this.$store.state.app.rightbar},collections:function(){return this.$store.state.app.collections},currentCollection:function(){return this.$store.state.app.currentCollection},loginsecret:function(){return this.$store.state.app.loginsecret},player:function(){return this.$store.state.player.player},seek:function(){return this.$store.state.app.book.seek},playing:function(){return this.$store.state.player.playing},hash:function(){return this.$store.getters["app/hash"](this.$route.fullPath)}},watch:{$route:function(t,e){console.log("watch route triggered"),t!==e&&(t.query.collection>0?this.$store.commit("app/currentCollection",t.query.collection):this.$store.commit("app/currentCollection",0),t.query.folder?this.$store.dispatch("app/fetchFolder",t.query.folder):this.$store.dispatch("app/fetchFolder"))},currentCollection:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t===e){n.next=3;break}return n.next=3,r.$store.dispatch("app/selectFolder",{path:"/"});case 3:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.$store.dispatch("app/initialiseApp"),this.$store.commit("app/activepage","library")},methods:{selectFile:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t!==e.currentFile.index){r.next=8;break}if(!e.playing){r.next=5;break}return r.abrupt("return",e.$store.commit("app/player",!0));case 5:return r.next=7,e.$store.dispatch("player/load");case 7:return r.abrupt("return",e.player.play());case 8:return n=0,t>0&&(o=e.folder.files.slice(0,t),n=e.$store.getters["player/getStart"](o)),data={duration:e.folder.files[t].meta.duration,index:t,path:e.folder.files[t].path,start:n},e.$store.commit("player/currentFile",data),r.next=14,e.$store.dispatch("player/load",{file:e.folder.files[t].path,seek:0});case 14:e.player.play();case 15:case"end":return r.stop()}}),r)})))()},updateServer:function(input){this.$store.commit("app/server",input)}}}),l=r(8),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"p-3 px-6 lg:px-12 w-screen lg:w-full content-area overflow-auto lg:border-l border-gray-100"},[t.folder&&t.folder.subfolders&&t.folder.subfolders.length>0?r("div",[r("BreadCrumbs"),t._v(" "),r("div",{staticClass:"my-6 text-xl font-bold text-gray-600"},[t._v("\n      Folders\n    ")]),t._v(" "),t._l(t.folder.subfolders,(function(e,n){return r("div",{key:n,staticClass:"bg-gray-50 filter drop-shadow rounded-lg my-2 w-full flex text-gray-600 max-w-xl items-center cursor-pointer",on:{click:function(r){return t.$store.dispatch("app/selectFolder",e)}}},[t._m(0,!0),t._v(" "),r("div",{staticClass:"px-5 py-2"},[r("span",{staticClass:"text-sm font-medium"},[t._v(t._s(e.name))])])])}))],2):t._e(),t._v(" "),t.folder&&t.folder.files&&t.folder.files.length>0?r("div",[r("BreadCrumbs"),t._v(" "),r("div",{staticClass:"my-6 text-xl font-bold text-gray-600"},[t._v("\n      Files\n    ")]),t._v(" "),t._l(t.folder.files,(function(e,n){return r("div",{key:n,staticClass:"bg-gray-50 min-h-[3.5rem] filter drop-shadow rounded-lg hover:opacity-80 my-2 w-full flex text-gray-600 max-w-xl items-center cursor-pointer",class:{"opacity-50":(t.seek>0||t.current>0||t.currentFile.index>0)&&t.currentFile.index!==n},on:{click:function(e){return t.selectFile(n)}}},[r("div",{staticClass:"p-4 flex self-stretch items-center text-gray-50 bg-blue-400 rounded-l-lg"},[r("svg",{staticClass:"svg-inline--fa fa-fw fa-book fa-lg",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fal","data-icon":"book",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[r("path",{attrs:{fill:"currentColor",d:"M448 368v-320C448 21.49 426.5 0 400 0h-320C35.82 0 0 35.82 0 80V448c0 35.35 28.65 64 64 64h368c8.844 0 16-7.156 16-16S440.8 480 432 480H416v-66.95C434.6 406.4 448 388.8 448 368zM32 80C32 53.49 53.49 32 80 32H96v352H64c-11.71 0-22.55 3.389-32 8.9V80zM384 480H64c-17.64 0-32-14.36-32-32s14.36-32 32-32h320V480zM400 384H128V32h272C408.8 32 416 39.17 416 48v320C416 376.8 408.8 384 400 384zM352 128H192C183.2 128 176 135.2 176 144S183.2 160 192 160h160c8.844 0 16-7.156 16-16S360.8 128 352 128zM352 224H192C183.2 224 176 231.2 176 240S183.2 256 192 256h160c8.844 0 16-7.156 16-16S360.8 224 352 224z"}})])]),t._v(" "),r("div",{staticClass:"flex justify-between w-full items-center"},[r("div",{staticClass:"px-5 py-2 flex flex-col"},[r("span",{staticClass:"text-sm font-medium"},[t._v(t._s(e.name))]),t._v(" "),r("span",{staticClass:"text-xs text-gray-500"},[r("span",{staticClass:"font-normal"},[t._v("Duration:")]),t._v(" "),r("span",{},[t._v(t._s(t.$formatToTime(e.meta.duration,3,!1)))]),t._v(" "),r("span",{staticClass:"ml-2 font-normal"},[t._v("Bitrate:")]),t._v(" "),r("span",{},[t._v(t._s(e.meta.bitrate))]),t._v("kbps")])]),t._v(" "),r("div",{staticClass:"px-4"},[r("div",{staticClass:"w-4 h-4 rounded-full",class:[!0===e.path?"bg-green-400":"bg-gray-200"]})])])])}))],2):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"p-4 flex self-stretch text-gray-50 bg-pink-600 rounded-l-lg"},[e("i",{staticClass:"fa-light fa-fw fa-folder fa-lg"})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{BreadCrumbs:r(201).default})}}]);