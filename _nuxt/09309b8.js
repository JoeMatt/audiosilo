(window.webpackJsonp=window.webpackJsonp||[]).push([[5,2],{307:function(e,t,r){"use strict";r.r(t);r(38),r(107),r(148),r(45);var n={name:"BreadCrumbs",computed:{breadcrumbs:function(){var e=[{name:"Home",link:"/",active:!1}];if(this.$route.query.folder&&"/"!==this.$route.query.folder)for(var t=this.$route.query.folder.split("/"),i=0;i<t.length;i++)e.push({name:t[i],link:t.slice(0,i+1).join("/"),active:i===t.length-1});return e}}},o=r(9),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.breadcrumbs.length>1?r("div",{staticClass:"breadcrumbs flex-col lg:flex-row"},e._l(e.breadcrumbs,(function(t,n){return r("span",{key:n,class:{active:t.active},on:{click:function(r){return e.$emit("selectFolder",{path:t.link})}}},[e._v("\n    "+e._s(t.name)+"\n  ")])})),0):e._e()}),[],!1,null,null,null);t.default=component.exports},312:function(e,t,r){"use strict";r.r(t);var n=r(2),o=(r(29),r(45),r(14),r(42)),l=r.n(o),c={layout:"page",name:"App",transition:{name:"page"},components:{},data:function(){return{foldername:"",corsproxy:"",secret:""}},computed:{currentFolder:function(){return this.$route.query.folder||""},currentFile:function(){return this.$store.state.player.currentFile},loginStatus:function(){return this.$store.state.app.loginStatus},server:function(){return this.$store.state.app.server},folder:function(){return this.$store.state.app.folder},group:function(){return this.$store.state.app.group},rightbar:function(){return this.$store.state.app.rightbar},collections:function(){return this.$store.state.app.collections},currentCollection:function(){return this.$store.state.app.currentCollection},loginsecret:function(){return this.$store.state.app.loginsecret},player:function(){return this.$store.state.player.player},seek:function(){return this.$store.state.app.book.seek},playing:function(){return this.$store.state.player.playing}},watch:{$route:function(e,t){console.log("watch route triggered"),e!==t&&(e.query.collection>0?this.$store.commit("app/currentCollection",e.query.collection):this.$store.commit("app/currentCollection",0),e.query.folder?this.fetchFolder(e.query.folder):this.fetchFolder())},loginStatus:function(e,t){console.log("login status updated"),e!==t&&!1!==e&&(this.$route.query.collection>0?this.$store.commit("app/currentCollection",this.$route.query.collection):this.$store.commit("app/currentCollection",0),this.fetchFolder(this.currentFolder))},currentCollection:function(e,t){e!==t&&this.selectFolder({path:"/"})}},mounted:function(){this.$store.dispatch("app/initialiseApp"),this.$store.commit("app/activepage","library"),this.fetchFolder()},methods:{selectFile:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e!==t.currentFile.index){r.next=8;break}if(!t.playing){r.next=5;break}return r.abrupt("return",t.$store.commit("app/player",!0));case 5:return r.next=7,t.$store.dispatch("player/load");case 7:return r.abrupt("return",t.player.play());case 8:return n=0,e>0&&(o=t.folder.files.slice(0,e),n=t.$store.getters["player/getStart"](o)),data={duration:t.folder.files[e].meta.duration,index:e,path:t.folder.files[e].path,start:n},t.$store.commit("player/currentFile",data),r.next=14,t.$store.dispatch("player/load",{file:t.folder.files[e].path,seek:0});case 14:t.player.play();case 15:case"end":return r.stop()}}),r)})))()},fetchFolder:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"",r.next=3,fetch(t.$store.getters["app/getServerUrl"]+"folder/"+n,{headers:{Authorization:"Bearer "+l.a.get("audioserve_token")}});case 3:if(401!==(o=r.sent).status){r.next=7;break}return t.$store.commit("app/loginStatus",!1),r.abrupt("return",!1);case 7:return r.next=9,o.json();case 9:(c=r.sent)&&t.$store.commit("app/folder",c);case 11:case"end":return r.stop()}}),r)})))()},updateServer:function(input){this.$store.commit("app/server",input)},selectFolder:function(e){this.$store.commit("app/folderDescription",""),this.$store.commit("app/player",!1);var t={path:"/",query:{folder:e.path}};this.currentCollection>0&&(t.query.collection=this.currentCollection),this.$router.push(t),this.fetchFolder(encodeURIComponent(e.path))}}},f=r(9),component=Object(f.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-3 px-6 lg:px-12 w-screen lg:w-full content-area overflow-auto lg:border-l border-gray-100"},[e.folder&&e.folder.subfolders?r("div",[e.folder.subfolders.length>0?r("div",{staticClass:"my-6 text-xl font-bold text-gray-600"},[e._v("\n      Folders\n      "),r("BreadCrumbs",{on:{selectFolder:e.selectFolder}})],1):e._e(),e._v(" "),e._l(e.folder.subfolders,(function(t,n){return r("div",{key:n,staticClass:"bg-gray-50 filter drop-shadow rounded-lg my-2 w-full flex text-gray-600 max-w-xl items-center cursor-pointer",on:{click:function(r){return e.selectFolder(t)}}},[e._m(0,!0),e._v(" "),r("div",{staticClass:"px-5"},[r("span",{staticClass:"text-sm font-medium"},[e._v(e._s(t.name))])])])}))],2):e._e(),e._v(" "),e.folder&&e.folder.files?r("div",[e.folder.files.length>0?r("div",{staticClass:"my-6 text-xl font-bold text-gray-600"},[e._v("\n      Files\n      "),r("BreadCrumbs",{on:{selectFolder:e.selectFolder}})],1):e._e(),e._v(" "),e._l(e.folder.files,(function(t,n){return r("div",{key:n,staticClass:"bg-gray-50 filter drop-shadow rounded-lg my-2 w-full flex text-gray-600 max-w-xl items-center cursor-pointer",class:{"opacity-50":(e.seek>0||e.currentFile.index>0)&&e.currentFile.index!==n},on:{click:function(t){return e.selectFile(n)}}},[r("div",{staticClass:"p-4 text-gray-50 bg-blue-400 rounded-l-lg"},[r("svg",{staticClass:"svg-inline--fa fa-fw fa-book fa-lg",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fal","data-icon":"book",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[r("path",{attrs:{fill:"currentColor",d:"M448 368v-320C448 21.49 426.5 0 400 0h-320C35.82 0 0 35.82 0 80V448c0 35.35 28.65 64 64 64h368c8.844 0 16-7.156 16-16S440.8 480 432 480H416v-66.95C434.6 406.4 448 388.8 448 368zM32 80C32 53.49 53.49 32 80 32H96v352H64c-11.71 0-22.55 3.389-32 8.9V80zM384 480H64c-17.64 0-32-14.36-32-32s14.36-32 32-32h320V480zM400 384H128V32h272C408.8 32 416 39.17 416 48v320C416 376.8 408.8 384 400 384zM352 128H192C183.2 128 176 135.2 176 144S183.2 160 192 160h160c8.844 0 16-7.156 16-16S360.8 128 352 128zM352 224H192C183.2 224 176 231.2 176 240S183.2 256 192 256h160c8.844 0 16-7.156 16-16S360.8 224 352 224z"}})])]),e._v(" "),r("div",{staticClass:"flex justify-between w-full items-center"},[r("div",{staticClass:"px-5 flex flex-col"},[r("span",{staticClass:"text-sm font-medium"},[e._v(e._s(t.name))]),e._v(" "),r("span",{staticClass:"text-xs text-gray-500"},[r("span",{staticClass:"font-normal"},[e._v("Duration:")]),e._v(" "),r("span",{},[e._v(e._s(e.$formatToTime(t.meta.duration,3,!1)))]),e._v(" "),r("span",{staticClass:"ml-2 font-normal"},[e._v("Bitrate:")]),e._v(" "),r("span",{},[e._v(e._s(t.meta.bitrate))]),e._v("kbps")])]),e._v(" "),e._m(1,!0)])])}))],2):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"p-4 text-gray-50 bg-pink-600 rounded-l-lg"},[t("i",{staticClass:"fa-light fa-fw fa-folder fa-lg"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"px-4"},[t("div",{staticClass:"w-4 h-4 bg-gray-200 rounded-full"})])}],!1,null,null,null);t.default=component.exports;installComponents(component,{BreadCrumbs:r(307).default})}}]);